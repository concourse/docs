<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>Setting Pipelines - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Barlow:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
<script async type="text/javascript" src="js/prism.js"></script>
<script data-goatcounter="https://concourse.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </head>
  <body>
    <div class="top-banner">
  <p class="banner-text">
    <a href="https://github.com/orgs/concourse/discussions/9265">ðŸ“£ Call for Help: Check your database for us! ðŸ“£</a>
  </p>
</div>

<div class="page-top">
  <nav class="top-nav">
    <a class="top-link logo-link" href="/"><img src="images/logo-white.svg" />Concourse</a>
    
    <a class="top-link active" href="docs.html">Docs</a>
    
    <a class="top-link" href="examples.html">Examples</a>
    
    <a class="top-link" href="project.html">Project</a>
    
    <a class="top-link" href="ecosystem.html">Ecosystem</a>
    
    <a class="top-link" href="support.html">Support</a>
    
    <a class="top-link" href="https://resource-types.concourse-ci.org">Resource Types</a>
    <a class="top-link" href="https://blog.concourse-ci.org">blog</a>

    <div id="search"></div>

    <script type="text/javascript">
      var app = Elm.Search.init({
        node: document.getElementById('search')
      });

      app.ports.emitSearchTerm.subscribe(function(term) {
        goatcounter.count({
          path: "search:" + term,
          title: "user searched: " + term,
          event: true
        });
      });
    </script>
  </nav>
</div>

    <div class="page-body">
      <div class="page-nav">
        






  
  
  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1</span><a href="docs.html"  class="active">Docs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1</td>
            <td class="title-cell"><a href="getting-started.html" >Getting Started</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.2</td>
            <td class="title-cell"><a href="install.html" >Install</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.3</td>
            <td class="title-cell"><a href="auth.html" >Auth &amp; Teams</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.4</td>
            <td class="title-cell"><a href="fly.html" >The <code>fly</code> CLI</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.5</td>
            <td class="title-cell"><a href="config-basics.html" >Config Basics</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6</td>
            <td class="title-cell"><a href="pipelines.html"  class="active">Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.7</td>
            <td class="title-cell"><a href="vars.html" >Vars</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.8</td>
            <td class="title-cell"><a href="resources.html" >Resources</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.9</td>
            <td class="title-cell"><a href="resource-types.html" >Resource Types</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.10</td>
            <td class="title-cell"><a href="jobs.html" >Jobs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11</td>
            <td class="title-cell"><a href="steps.html" >Steps</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.12</td>
            <td class="title-cell"><a href="tasks.html" >Tasks</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13</td>
            <td class="title-cell"><a href="builds.html" >Builds</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.14</td>
            <td class="title-cell"><a href="how-to-guides.html" >How-To Guides</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.15</td>
            <td class="title-cell"><a href="operation.html" >Operation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.16</td>
            <td class="title-cell"><a href="observation.html" >Observation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17</td>
            <td class="title-cell"><a href="internals.html" >Internals</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.6</span><a href="pipelines.html"  class="active">Pipelines</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.6.1</td>
            <td class="title-cell"><a href="setting-pipelines.html"  class="self">Setting Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6.2</td>
            <td class="title-cell"><a href="managing-pipelines.html" >Managing Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6.3</td>
            <td class="title-cell"><a href="instanced-pipelines.html" >Grouping Pipelines</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.6.1</span><a href="setting-pipelines.html"  class="self">Setting Pipelines</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.6.1.1</td>
            <td class="title-cell"><a href="setting-pipelines.html#fly-set-pipeline" ><code>fly set-pipeline</code></a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6.1.2</td>
            <td class="title-cell"><a href="setting-pipelines.html#fly-validate-pipeline" ><code>fly validate-pipeline</code></a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6.1.3</td>
            <td class="title-cell"><a href="setting-pipelines.html#fly-format-pipeline" ><code>fly format-pipeline</code></a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  



      </div>

      <div class="body-content">
        <div class="page-content">
          <div class="section" id="section_setting-pipelines">
  
  <h1 class="section-header"><a class="anchor-target" name="setting-pipelines" href="#setting-pipelines"></a><span class="section-number">1.6.1 </span>Setting Pipelines</h1>
  

  <p>Pipelines are configured entirely via the <a href="fly.html"><code>fly</code> CLI</a> or the <a href="set-pipeline-step.html#set-pipeline"><code>set_pipeline</code> step</a>. There is no GUI for configuring pipelines.</p>

  
    
      <div class="section" id="section_fly-set-pipeline">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-set-pipeline" href="#fly-set-pipeline"></a><code>fly set-pipeline</code></h2>
  

  <p>To submit a pipeline configuration to Concourse from a file on your local disk you can use the <code>-c</code> or <code>--config</code> flag, like so:</p><pre><code class="language-bash">$ fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config pipeline.yml</code></pre><p>This will present a diff of the changes and ask you to confirm the changes. If you accept then Concourse&#39;s pipeline configuration will switch to the pipeline definition in the YAML file specified.</p><p>The <code>-c</code> or <code>--config</code> flag can also take in the value <code>-</code> to indicate reading from <code>stdin</code>:</p><pre><code class="language-bash">$ cat pipeline.yml | fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config -</code></pre><p>Note that reading from <code>stdin</code> disables the confirmation prompt - the pipeline will be set automatically.</p>

  
    
      <div class="section" id="section_pipeline-static-vars">
  
  <h3 class="section-header"><a class="anchor-target" name="pipeline-static-vars" href="#pipeline-static-vars"></a>Providing static values for vars</h3>
  

  <p>The pipeline configuration can contain <a href="vars.html">Vars</a> which may be <a href="vars.html#static-vars">replaced with static values</a> or <a href="vars.html#dynamic-vars">loaded at runtime</a>. This allows for credentials to be extracted from a pipeline config, making it safe to check in to a public repository or pass around.</p><p>For example, if you have a <code>pipeline.yml</code> as follows:</p><pre><code class="language-yaml">resources:
- name: private-repo
  type: git
  source:
    uri: git@...
    branch: master
    private_key: ((private-repo-key))</code></pre><p>...you could then configure this pipeline like so:</p><pre><code class="language-bash">$ fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config pipeline.yml \
    --var &#34;private-repo-key=$(cat id_rsa)&#34;</code></pre><p>Or, if you had a <code>vars.yml</code> as follows:</p><pre><code class="language-yaml">private-repo-key: |
  -----BEGIN RSA PRIVATE KEY-----
  ...
  -----END RSA PRIVATE KEY-----</code></pre><p>...you could configure it like so:</p><pre><code class="language-bash">$ fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config pipeline.yml \
    --load-vars-from vars.yml</code></pre><p>You can use nested fields in your <code>pipeline.yml</code> as follows: <pre><code class="language-yaml">resources:
- name: private-repo
  type: git
  source:
    uri: git@((repo.uri))
    branch: ((repo.branch))
    private_key: ((&#34;github.com&#34;.private-repo-key))</code></pre></p><p>...you could configure it by <code>--load-vars-from</code> with a <code>vars.yml</code> as follows:</p><pre><code class="language-yaml">repo:
  uri: github.com/...
  branch: master
github.com:
  private-repo-key: |
    -----BEGIN RSA PRIVATE KEY-----
    ...
    -----END RSA PRIVATE KEY-----</code></pre><p>...or you could also configure it by passing the vars as flags:</p><pre><code class="language-bash">$ fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config pipeline.yml \
    --var &#34;repo.uri=github.com&#34; \
    --var &#34;repo.branch=master&#34; \
    --var &#34;\&#34;github.com\&#34;.private-repo-key=$(cat id_rsa)&#34;</code></pre><p>When configuring a pipeline, any vars not provided statically will be left to resolve <a href="vars.html#dynamic-vars">at runtime</a>. To check that all vars are resolveable, you can pass the <code>--check-creds</code> flag:</p><pre><code class="language-bash">$ fly -t example set-pipeline \
    --pipeline my-pipeline \
    --config pipeline.yml \
    --load-vars-from vars.yml \
    --check-creds</code></pre><p>This will fill in all statically-provided vars and then attempt to resolve all remanining vars server-side. If any fail to resolve, configuring the pipeline will fail.</p>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_fly-validate-pipeline">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-validate-pipeline" href="#fly-validate-pipeline"></a><code>fly validate-pipeline</code></h2>
  

  <p>To validate a local pipeline configuration without submitting it to Concourse, run <code>validate-pipeline</code>:</p><pre><code class="language-bash">$ fly validate-pipeline --config pipeline.yml</code></pre><p>By default, pipeline errors will cause <code>validate-pipeline</code> to fail, but warnings won&#39;t. To fail on both errors and warnings, pass the `--strict` flag.</p>

  
    
  
</div>
    
      <div class="section" id="section_fly-format-pipeline">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-format-pipeline" href="#fly-format-pipeline"></a><code>fly format-pipeline</code></h2>
  

  <p>To format a pipeline config in a &#34;canonical&#34; form (i.e. keys are in normal order, with <code>name</code> first for example), run:</p><pre><code class="language-bash">$ fly format-pipeline --config pipeline.yml</code></pre><p>This will print the formatted pipeline config to <code>stdout</code>. To update the file in-place, pass <code>--write/-w</code>.</p>

  
    
  
</div>
    
  
</div>

          <nav class="prev-next">
          
            <div class="prev">
              prev:

              
              <span class="section-number">1.6</span>
              

              <a href="pipelines.html">Pipelines</a>
            </div>
          

          
            <div class="next">
              next:

              
              <span class="section-number">1.6.2</span>
              

              <a href="managing-pipelines.html">Managing Pipelines</a>
            </div>
          
          </nav>
        </div>

        <div class="page-aside"></div>
      </div>
    </div>

    <ul class="improve-docs">
      <li><img src="images/icons/github-box.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>