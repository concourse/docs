<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>Resource Checker - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Barlow:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
<script async type="text/javascript" src="js/prism.js"></script>
<script data-goatcounter="https://concourse.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </head>
  <body>
    

<div class="page-top">
  <nav class="top-nav">
    <a class="top-link logo-link" href="/"><img src="images/logo-white.svg" />Concourse</a>
    
    <a class="top-link active" href="docs.html">Docs</a>
    
    <a class="top-link" href="examples.html">Examples</a>
    
    <a class="top-link" href="project.html">Project</a>
    
    <a class="top-link" href="ecosystem.html">Ecosystem</a>
    
    <a class="top-link" href="https://resource-types.concourse-ci.org">Resource Types</a>
    <a class="top-link" href="https://blog.concourse-ci.org">blog</a>
    <a class="top-link" href="https://github.com/concourse/concourse/discussions">discuss</a>

    <div id="search"></div>

    <script type="text/javascript">
      var app = Elm.Main.init({
        node: document.getElementById('search')
      });

      app.ports.emitSearchTerm.subscribe(function(term) {
        goatcounter.count({
          path: "search:" + term,
          title: "user searched: " + term,
          event: true
        });
      });
    </script>
  </nav>
</div>

    <div class="page-body">
      <div class="page-nav">
        






  
  
  
  
  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1</span><a href="docs.html"  class="active">Docs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1</td>
            <td class="title-cell"><a href="getting-started.html" >Getting Started</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.2</td>
            <td class="title-cell"><a href="install.html" >Install</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.3</td>
            <td class="title-cell"><a href="auth.html" >Auth &amp; Teams</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.4</td>
            <td class="title-cell"><a href="fly.html" >The <code>fly</code> CLI</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.5</td>
            <td class="title-cell"><a href="config-basics.html" >Config Basics</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6</td>
            <td class="title-cell"><a href="pipelines.html" >Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.7</td>
            <td class="title-cell"><a href="vars.html" >Vars</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.8</td>
            <td class="title-cell"><a href="resources.html" >Resources</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.9</td>
            <td class="title-cell"><a href="resource-types.html" >Resource Types</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.10</td>
            <td class="title-cell"><a href="jobs.html" >Jobs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11</td>
            <td class="title-cell"><a href="steps.html" >Steps</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.12</td>
            <td class="title-cell"><a href="tasks.html" >Tasks</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13</td>
            <td class="title-cell"><a href="builds.html" >Builds</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.14</td>
            <td class="title-cell"><a href="how-to-guides.html" >How-To Guides</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.15</td>
            <td class="title-cell"><a href="operation.html" >Operation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.16</td>
            <td class="title-cell"><a href="observation.html" >Observation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17</td>
            <td class="title-cell"><a href="internals.html"  class="active">Internals</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.17</span><a href="internals.html"  class="active">Internals</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.17.1</td>
            <td class="title-cell"><a href="internals.html#basic-architecture" >Basic architecture</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.2</td>
            <td class="title-cell"><a href="internals.html#component-atc"  class="active">ATC: web UI &amp; build scheduler</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.3</td>
            <td class="title-cell"><a href="internals.html#component-tsa" >TSA: worker registration &amp; forwarding</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.4</td>
            <td class="title-cell"><a href="internals.html#architecture-worker" >Workers Architecture</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <a href="internals.html#component-atc"  class="active">ATC: web UI &amp; build scheduler</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.17.2.1</td>
            <td class="title-cell"><a href="checker.html"  class="self">Resource Checker</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.2.2</td>
            <td class="title-cell"><a href="scheduler.html" >Build Scheduler</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.2.3</td>
            <td class="title-cell"><a href="build-tracker.html" >Build Tracker</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17.2.4</td>
            <td class="title-cell"><a href="garbage-collector.html" >Garbage Collector</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  



      </div>

      <div class="body-content">
        <div class="page-content">
          <div class="section" id="section_checker">
  
  <h1 class="section-header"><a class="anchor-target" name="checker" href="#checker"></a><span class="section-number">1.17.2.1 </span>Resource Checker</h1>
  

  <p><a href="resources.html">Resources</a> represent external state such as a git repository, files in an S3 bucket, or anything else that changes over time. By modelling these as resources, it allows you to use this external state as inputs (or triggers) to your workloads.</p>

  
    
      <div class="section" id="section_when-are-resources-checked">
  
  <h2 class="section-header"><a class="anchor-target" name="when-are-resources-checked" href="#when-are-resources-checked"></a>When are resources checked?</h2>
  

  <p>The component that schedules resource checks is called the <strong>resource checker</strong>. The rate at which these checks happen is called the check interval (configurable via <code>CONCOURSE_LIDAR_SCANNER_INTERVAL</code>).  There&#39;s an obvious tradeoff, whereby the more frequently you poll, the bigger the strain on Concourse (as well as the external source). However, if you want to pick up those new commits as quickly as possible, then you need to poll as often as possible.</p><p>The resource checker uses the <a href="resources.html#schema.resource.check_every"><code class="schema-attribute-name"><bold>resource<wbr />.check_every</bold></code></a> interval in order to figure out if a resource needs to be checked. A resource&#39;s <code>check_every</code> interval dictates how often it should be checked for new versions, with a default of 1 minute. If that seems like a lot of checking, it is, but it&#39;s how Concourse keeps everything snappy. You can configure this interval independently for each resource using <code>check_every</code>.</p><p>If your external service supports it, you can set <a href="resources.html#schema.resource.webhook_token"><code class="schema-attribute-name"><bold>resource<wbr />.webhook_token</bold></code></a> to eliminate the need for periodic checking altogether. If a <code>webhook_token</code> is configured, the external service can notify Concourse when to check for new versions. Note that configuring a <code>webhook_token</code> will not stop Concourse from periodically checking your resource. If you wish to rely solely on webhooks for detecting new versions, you can set <code>check_every</code> to <code>never</code>.</p><p>On every interval tick, the resource checker will see if there are any resources that need to be checked. It does this by first finding resources which are used as inputs to jobs, and then comparing the current time against the last time each resource was checked. If it has been longer than a resource&#39;s configured <code>check_every</code> interval, a new check will be scheduled. In practice this means that if a resource has a <code>check_every</code> of <code>1m</code>, it is not guaranteed to be checked precisely every 60 seconds. <code>check_every</code> simply sets a lower bound on the time between checks.</p><p>When the resource checker finds a resource to check (either because its <code>check_every</code> interval elapsed, or because its configured <code>webhook_token</code> was triggered), it schedules a new <a href="builds.html">build</a> that invokes the <a href="implementing-resource-types.html#resource-check"><code>check</code> script</a> of the resource&#39;s underlying <a href="resource-types.html">resource type</a>.</p>

  
    
  
</div>
    
      <div class="section" id="section_what-resources-produce">
  
  <h2 class="section-header"><a class="anchor-target" name="what-resources-produce" href="#what-resources-produce"></a>What do resource checks produce?</h2>
  

  <p>The whole point of running checks is to produce versions. Concourse&#39;s <a href="scheduler.html">Build Scheduler</a> is centered around the idea of resource versions. It&#39;s how Concourse determines that something is <em>new</em> and a new build needs to be triggered.</p><p>The versions produced by each resource are unique to the underlying <a href="resource-types.html">resource type</a>. For instance, the <code>git</code> resource type uses commit SHAs as versions. The <code>registry-image</code> resource uses the image digest and tag in the version.</p>

  
    
  
</div>
    
  
</div>

          <nav class="prev-next">
          
            <div class="prev">
              prev:

              

              <a href="internals.html#component-atc">ATC: web UI &amp; build scheduler</a>
            </div>
          

          
            <div class="next">
              next:

              
              <span class="section-number">1.17.2.2</span>
              

              <a href="scheduler.html">Build Scheduler</a>
            </div>
          
          </nav>
        </div>

        <div class="page-aside"></div>
      </div>
    </div>

    <ul class="improve-docs">
      <li><img src="images/icons/github-box.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>