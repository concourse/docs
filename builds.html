<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>Builds - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Barlow:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
<script async type="text/javascript" src="js/prism.js"></script>
<script data-goatcounter="https://concourse.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </head>
  <body>
    

<div class="page-top">
  <nav class="top-nav">
    <a class="top-link logo-link" href="/"><img src="images/logo-white.svg" />Concourse</a>
    
    <a class="top-link active" href="docs.html">Docs</a>
    
    <a class="top-link" href="examples.html">Examples</a>
    
    <a class="top-link" href="project.html">Project</a>
    
    <a class="top-link" href="ecosystem.html">Ecosystem</a>
    
    <a class="top-link" href="https://resource-types.concourse-ci.org">Resource Types</a>
    <a class="top-link" href="https://blog.concourse-ci.org">blog</a>
    <a class="top-link" href="https://github.com/concourse/concourse/discussions">discuss</a>

    <div id="search"></div>

    <script type="text/javascript">
      var app = Elm.Main.init({
        node: document.getElementById('search')
      });

      app.ports.emitSearchTerm.subscribe(function(term) {
        goatcounter.count({
          path: "search:" + term,
          title: "user searched: " + term,
          event: true
        });
      });
    </script>
  </nav>
</div>

    <div class="page-body">
      <div class="page-nav">
        






  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1</span><a href="docs.html"  class="active">Docs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1</td>
            <td class="title-cell"><a href="getting-started.html" >Getting Started</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.2</td>
            <td class="title-cell"><a href="install.html" >Install</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.3</td>
            <td class="title-cell"><a href="auth.html" >Auth &amp; Teams</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.4</td>
            <td class="title-cell"><a href="fly.html" >The <code>fly</code> CLI</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.5</td>
            <td class="title-cell"><a href="config-basics.html" >Config Basics</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6</td>
            <td class="title-cell"><a href="pipelines.html" >Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.7</td>
            <td class="title-cell"><a href="vars.html" >Vars</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.8</td>
            <td class="title-cell"><a href="resources.html" >Resources</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.9</td>
            <td class="title-cell"><a href="resource-types.html" >Resource Types</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.10</td>
            <td class="title-cell"><a href="jobs.html" >Jobs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11</td>
            <td class="title-cell"><a href="steps.html" >Steps</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.12</td>
            <td class="title-cell"><a href="tasks.html" >Tasks</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13</td>
            <td class="title-cell"><a href="builds.html"  class="self">Builds</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.14</td>
            <td class="title-cell"><a href="how-to-guides.html" >How-To Guides</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.15</td>
            <td class="title-cell"><a href="operation.html" >Operation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.16</td>
            <td class="title-cell"><a href="observation.html" >Observation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17</td>
            <td class="title-cell"><a href="internals.html" >Internals</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.13</span><a href="builds.html"  class="self">Builds</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.13.1</td>
            <td class="title-cell"><a href="builds.html#build-rerunning" >Rerunning a Build</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13.2</td>
            <td class="title-cell"><a href="builds.html#fly-builds" ><code>fly builds</code></a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13.3</td>
            <td class="title-cell"><a href="builds.html#fly-intercept" ><code>fly intercept</code></a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13.4</td>
            <td class="title-cell"><a href="builds.html#fly-abort-build" ><code>fly abort-build</code></a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13.5</td>
            <td class="title-cell"><a href="builds.html#fly-watch" ><code>fly watch</code></a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  



      </div>

      <div class="body-content">
        <div class="page-content">
          <div class="section" id="section_builds">
  
  <h1 class="section-header"><a class="anchor-target" name="builds" href="#builds"></a><span class="section-number">1.13 </span>Builds</h1>
  

  <p>A build is an execution of a <em>build plan</em>, which is either</p><ul>

  <li><p>configured as a sequence of <a href="steps.html">steps</a> in a <a href="jobs.html">job</a></p></li>

  <li><p>generated by the <a href="checker.html">Resource Checker</a> to run a <a href="implementing-resource-types.html#resource-check"><code>check</code></a></p></li>

  <li><p>submitted directly to Concourse as a one-off build via <a href="tasks.html#running-tasks"><code>fly execute</code></a></p></li>

</ul><p>Containers and volumes are created as <a href="get-step.html"><code>get</code> step</a>s, <a href="put-step.html"><code>put</code> step</a>s, and <a href="task-step.html"><code>task</code> step</a>s run. When a build completes successfully, these containers go away.</p><p>A failed build&#39;s containers and volumes are kept around so that you can debug the build via <a href="builds.html#fly-intercept"><code>fly intercept</code></a>. If the build belongs to a <a href="jobs.html">job</a>, the containers will go away when the next build starts. If the build is a one-off, its containers will be removed immediately, so make sure you intercept while it&#39;s running, if you want to debug.</p><div class="table-of-contents">
  <span class="toc-header">Table of contents:</span>

  
  
  <ol class="toc">
  
    <li>
      <span class="section-number">1.13.1</span>
      <a href="builds.html#build-rerunning">Rerunning a Build</a>

      
  
  <ol class="toc">
  
    <li>
      <span class="section-number">1.13.1.1</span>
      <a href="builds.html#current-caveats-with-rerunning">Current caveats with rerunning</a>

      
  
  
    </li>
  
  </ol>
  
  
    </li>
  
    <li>
      <span class="section-number">1.13.2</span>
      <a href="builds.html#fly-builds"><code>fly builds</code></a>

      
  
  
    </li>
  
    <li>
      <span class="section-number">1.13.3</span>
      <a href="builds.html#fly-intercept"><code>fly intercept</code></a>

      
  
  
    </li>
  
    <li>
      <span class="section-number">1.13.4</span>
      <a href="builds.html#fly-abort-build"><code>fly abort-build</code></a>

      
  
  
    </li>
  
    <li>
      <span class="section-number">1.13.5</span>
      <a href="builds.html#fly-watch"><code>fly watch</code></a>

      
  
  
    </li>
  
  </ol>
  
  
</div>

  
    
      <div class="section" id="section_build-rerunning">
  
  <h2 class="section-header"><a class="anchor-target" name="build-rerunning" href="#build-rerunning"></a>Rerunning a Build</h2>
  

  <p>Concourse supports build rerunning, which means to run a new build using the exact same set of input versions as the original build. There are two ways to rerun a build: through the web UI on the builds page and through the <a href="jobs.html#fly-rerun-build"><code>fly rerun-build</code></a>.</p><p>When a build is rerun, it will create a new build using the name of the original build with the rerun number appended to it, e.g. <code>3.1</code> for the first rerun of build <code>3</code>.</p><p>Rerun builds are ordered chronologically after the original build, rather than becoming a new &#34;latest&#34; build. Similarly, when the scheduler is resolving <a href="get-step.html#schema.get.passed"><code>passed</code></a> constraints that reference a job with rerun builds, those rerun builds are processed in this same order. This ensures that the versions, which made it through a rerun build, do not become the new &#34;latest versions&#34;. Instead, they act as if the original build had succeeded at its point in the build history.</p><p>This may sound a little confusing, but the summary is that reruns should behave as if they replace the original failed build.</p>

  
    
      <div class="section" id="section_current-caveats-with-rerunning">
  
  <h3 class="section-header"><a class="anchor-target" name="current-caveats-with-rerunning" href="#current-caveats-with-rerunning"></a>Current caveats with rerunning</h3>
  

  <p>The current implementation of rerunning is an early iteration with one key limitation: a rerun build will use the <strong>current state of the job config</strong>, instead of running the exact build plan the original build ran with.</p><p>This means that if the <a href="jobs.html#schema.job.plan"><code class="schema-attribute-name"><bold>job<wbr />.plan</bold></code></a> has changed in a way that is backwards-incompatible, the rerun build may error. For example, if a new input is added, its version will not be available as the original build did not use it.</p><p>There are future plans to have reruns execute the exact build plan from the original build. If you are interested in tracking the progress for the second pass at rerunning builds - or contributing yourself! - the project epic is called <a href="https://project.concourse-ci.org/projects/MDc6UHJvamVjdDM3NjI5MTk=">Build Lifecycle View</a>.</p>

  
    
  
</div>
    
  
</div>
    
      <div class="section" id="section_fly-builds">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-builds" href="#fly-builds"></a><code>fly builds</code></h2>
  

  <p>To list the most recent builds, run:</p><pre><code class="language-bash">$ fly -t example builds</code></pre><p>To list the builds of a job, run:</p><pre><code class="language-bash">$ fly -t example builds -j pipeline-name/job-name</code></pre><p>This can be useful for periodically monitoring the state of a job. The output also works well with tools like <code>awk</code> and <code>grep</code>.</p><p>By default the most recent 50 builds are shown. To see more builds, use the <code>-c</code> flag, like so:</p><pre><code class="language-bash">$ fly -t example builds -c 100</code></pre>

  
    
  
</div>
    
      <div class="section" id="section_fly-intercept">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-intercept" href="#fly-intercept"></a><code>fly intercept</code></h2>
  

  <p>Sometimes it&#39;s helpful to connect to the machine where tasks run. This way you can either profile or inspect tasks, or see the state of the machine at the end of a run. Due to Concourse running tasks in containers on remote machines this would typically be hard to access.</p><p>To this end, there is a <code>fly intercept</code> command that will give you an interactive shell inside the specified container. Containers are identified by a few things, so you may need to specify a few flags to hone down the results. If there are multiple containers that the flags could refer to, an interactive prompt will show up allowing you to disambiguate.</p><p>For example, running the following will run a task and then enter the finished task&#39;s container:</p><pre><code class="language-bash">$ fly -t example execute
$ fly -t example intercept --step build</code></pre><blockquote class="aside"><p>When intercepting a task running on a Windows worker, you will need to specifically tell fly to to run <code>powershell</code>:</p><pre><code class="language-bash">$ fly -t example intercept powershell</code></pre></blockquote><p>Containers are around for a short time after a build finishes in order to allow people to intercept them.</p><p>You can also intercept builds that were run in your pipeline. By using <code>--job</code>, <code>--build</code>, and <code>--step</code> you can intercept a specific step from a build of a job in your pipeline. These flags also have short forms, like so:</p><pre><code class="language-bash">$ fly -t example intercept -j some-pipeline/some-job -b some-build -s some-step</code></pre><p>Note that <code>--build</code> can be omitted, and will default to the most recent build of the job. One-off builds can be reached by passing in their build ID to <code>--build</code> which can be found on the build list page.</p><p>The <code>--step</code> flag can also be omitted; this will let you pick the step interactively, if you don&#39;t know the exact name.</p><p>Resource checking containers can also be intercepted with <code>--check</code> or <code>-c</code>:</p><pre><code class="language-bash">$ fly -t example intercept --check some-pipeline/some-resource</code></pre><p>A specific command can also be given, e.g. <code>fly intercept ps auxf</code> or <code>fly intercept htop</code>. This allows for patterns such as <code>watch fly intercept ps auxf</code>, which will continuously show the process tree of the current build&#39;s task, even as the &#34;current build&#34; changes.</p><p>The working directory and any relevant environment variables (e.g. those having come from <a href="task-step.html#schema.task.params"><code>task</code> step <strong><code>params</code></strong></a>) used by the original process will also be used for the process run by intercept.</p>

  
    
  
</div>
    
      <div class="section" id="section_fly-abort-build">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-abort-build" href="#fly-abort-build"></a><code>fly abort-build</code></h2>
  

  <p>To abort a build of a job, run:</p><pre><code class="language-bash">$ fly -t example abort-build --job my-pipeline/my-job --build 3</code></pre><p>This will cancel build <code>3</code> of the <code>my-job</code> job in the <code>my-pipeline</code> pipeline.</p>

  
    
  
</div>
    
      <div class="section" id="section_fly-watch">
  
  <h2 class="section-header"><a class="anchor-target" name="fly-watch" href="#fly-watch"></a><code>fly watch</code></h2>
  

  <p>Concourse emits streaming colored logs on the website, but it can be helpful to have the logs available to the command line (e.g. so that they can be processed by other commands).</p><p>The <code>watch</code> command can be used to do just this. You can also view builds that are running in your pipeline, or builds that have already finished.</p><p>Note that unlike <a href="tasks.html#running-tasks"><code>fly execute</code></a>, killing <code>fly watch</code> via <code>SIGINT</code> or <code>SIGTERM</code> will <em>not</em> abort the build.</p><p>To watch the most recent one-off build, just run <code>fly watch</code> with no arguments. To watch a specific build (one-off or no), pass <code>--build</code> with the ID of the build to watch. This ID is available at the start of <a href="tasks.html#running-tasks"><code>fly execute</code></a>&#39;s output or by browsing to the builds list in the web UI.</p><p>By using the <code>--job</code> and <code>--build</code> flags you can pick out a specific build of a job to watch. For example, the following command will either show the archived logs for an old build, if it has finished running, or it will stream the current logs, if the build is still in progress.</p><pre><code class="language-bash">$ fly -t example watch --job my-pipeline/tests --build 52</code></pre><p>If the <code>--job</code> flag is specified and <code>--build</code> is omitted, the most recent build of the specified job will be selected.</p><p>If there is a mismatch between the <code>fly</code> and <code>web</code> versions, it is possible to run into <code>failed to parse next event: unknown event type</code> error. The <code>--ignore-event-parsing-errors</code> flag can be passed to ignore such errors. </p>

  
    
  
</div>
    
  
</div>

          <nav class="prev-next">
          
            <div class="prev">
              prev:

              
              <span class="section-number">1.12</span>
              

              <a href="tasks.html">Tasks</a>
            </div>
          

          
            <div class="next">
              next:

              
              <span class="section-number">1.14</span>
              

              <a href="how-to-guides.html">How-To Guides</a>
            </div>
          
          </nav>
        </div>

        <div class="page-aside"></div>
      </div>
    </div>

    <ul class="improve-docs">
      <li><img src="images/icons/github-box.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>