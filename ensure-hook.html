<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>ensure Step Hook - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Barlow:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
<script async type="text/javascript" src="js/prism.js"></script>
<script data-goatcounter="https://concourse.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </head>
  <body>
    <div class="top-banner">
  <p class="banner-text">
    ✨ New Blog Post: <a href="https://blog.concourse-ci.org/posts/2025-01-06-concourse-2024-review/">Concourse 2024 in Review</a> ✨
  </p>
</div>

<div class="page-top">
  <nav class="top-nav">
    <a class="top-link logo-link" href="/"><img src="images/logo-white.svg" />Concourse</a>
    
    <a class="top-link active" href="docs.html">Docs</a>
    
    <a class="top-link" href="examples.html">Examples</a>
    
    <a class="top-link" href="project.html">Project</a>
    
    <a class="top-link" href="ecosystem.html">Ecosystem</a>
    
    <a class="top-link" href="https://resource-types.concourse-ci.org">Resource Types</a>
    <a class="top-link" href="https://blog.concourse-ci.org">blog</a>
    <a class="top-link" href="https://github.com/concourse/concourse/discussions">discuss</a>

    <div id="search"></div>

    <script type="text/javascript">
      var app = Elm.Main.init({
        node: document.getElementById('search')
      });

      app.ports.emitSearchTerm.subscribe(function(term) {
        goatcounter.count({
          path: "search:" + term,
          title: "user searched: " + term,
          event: true
        });
      });
    </script>
  </nav>
</div>

    <div class="page-body">
      <div class="page-nav">
        






  
  
  
  
  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1</span><a href="docs.html"  class="active">Docs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1</td>
            <td class="title-cell"><a href="getting-started.html" >Getting Started</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.2</td>
            <td class="title-cell"><a href="install.html" >Install</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.3</td>
            <td class="title-cell"><a href="auth.html" >Auth &amp; Teams</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.4</td>
            <td class="title-cell"><a href="fly.html" >The <code>fly</code> CLI</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.5</td>
            <td class="title-cell"><a href="config-basics.html" >Config Basics</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6</td>
            <td class="title-cell"><a href="pipelines.html" >Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.7</td>
            <td class="title-cell"><a href="vars.html" >Vars</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.8</td>
            <td class="title-cell"><a href="resources.html" >Resources</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.9</td>
            <td class="title-cell"><a href="resource-types.html" >Resource Types</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.10</td>
            <td class="title-cell"><a href="jobs.html" >Jobs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11</td>
            <td class="title-cell"><a href="steps.html"  class="active">Steps</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.12</td>
            <td class="title-cell"><a href="tasks.html" >Tasks</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13</td>
            <td class="title-cell"><a href="builds.html" >Builds</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.14</td>
            <td class="title-cell"><a href="how-to-guides.html" >How-To Guides</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.15</td>
            <td class="title-cell"><a href="operation.html" >Operation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.16</td>
            <td class="title-cell"><a href="observation.html" >Observation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17</td>
            <td class="title-cell"><a href="internals.html" >Internals</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.11</span><a href="steps.html"  class="active">Steps</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.11.1</td>
            <td class="title-cell"><a href="get-step.html" ><code>get</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.2</td>
            <td class="title-cell"><a href="put-step.html" ><code>put</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.3</td>
            <td class="title-cell"><a href="task-step.html" ><code>task</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.4</td>
            <td class="title-cell"><a href="set-pipeline-step.html" ><code>set_pipeline</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.5</td>
            <td class="title-cell"><a href="load-var-step.html" ><code>load_var</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.6</td>
            <td class="title-cell"><a href="in-parallel-step.html" ><code>in_parallel</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.7</td>
            <td class="title-cell"><a href="do-step.html" ><code>do</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.8</td>
            <td class="title-cell"><a href="try-step.html" ><code>try</code> step</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9</td>
            <td class="title-cell"><a href="modifier-and-hook-steps.html"  class="active">Modifier And Hook Steps</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.11.9</span><a href="modifier-and-hook-steps.html"  class="active">Modifier And Hook Steps</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.11.9.1</td>
            <td class="title-cell"><a href="across-step.html" ><code>across</code> Step Modifier</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.2</td>
            <td class="title-cell"><a href="timeout-step.html" ><code>timeout</code> Step Modifier</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.3</td>
            <td class="title-cell"><a href="attempts-step.html" ><code>attempts</code> Step Modifier</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.4</td>
            <td class="title-cell"><a href="tags-step.html" ><code>tags</code> Step Modifier</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.5</td>
            <td class="title-cell"><a href="on-success-step.html" ><code>on_success</code> Step Hook</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.6</td>
            <td class="title-cell"><a href="on-failure-hook.html" ><code>on_failure</code> Step Hook</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.7</td>
            <td class="title-cell"><a href="on-abort-hook.html" ><code>on_abort</code> Step Hook</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.8</td>
            <td class="title-cell"><a href="on-error-hook.html" ><code>on_error</code> Step Hook</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11.9.9</td>
            <td class="title-cell"><a href="ensure-hook.html"  class="self"><code>ensure</code> Step Hook</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  



<div class="context">
  <div class="Top">
    On this page:
  </div>

  <div class="children anchors">
    <table>
      
      <tr>
        <td class="number-cell"><code>#</code></td>
        <td class="title-cell"><a href="ensure-hook.html#schema.ensure"><code class="schema-attribute-name"><bold>ensure</bold></code></a></td>
      </tr>
      

      
  
    
  

    </table>
  </div>
</div>

      </div>

      <div class="body-content">
        <div class="page-content">
          <div class="section" id="section_ensure-hook">
  
  <h1 class="section-header"><a class="anchor-target" name="ensure-hook" href="#ensure-hook"></a><span class="section-number">1.11.9.9 </span><code>ensure</code> Step Hook</h1>
  

  <p>A hook step to execute after the parent step regardless of whether the parent step succeeds, fails, or errors. The step will also be executed if the build was aborted and its parent step was interrupted.</p><p>If the parent step succeeds and the ensured step fails, the overall step fails.</p><div class="toggleable schema-attribute optional">
  <input id="toggle-schema.ensure" type="checkbox" class="toggle" />
  <label for="toggle-schema.ensure" class="toggle-title">
    <a id="schema.ensure"></a>

    <code><a class="attribute-name" href="#schema.ensure">ensure</a>: <span class="attribute-type"><a href="steps.html#schema.step"><strong>step</strong></a></span></code>
  </label>

  <div class="toggle-content attribute-content">
    <div class="toggleable example">
  <input id="toggle-d468dc2adc6e1910da3b15c70fdb00fc88b2ffef" type="checkbox" class="toggle" />
  <label for="toggle-d468dc2adc6e1910da3b15c70fdb00fc88b2ffef" class="toggle-title">Releasing a lock</label>
  <div class="toggle-content">
    <p>The following build plan acquires a lock and then <code>ensure</code>s that the lock is released.</p><pre><code class="language-yaml">plan:
- put: some-lock
  params: {acquire: true}
- task: integration
  file: foo/integration.yml
  ensure:
    put: some-lock
    params: {release: some-lock}</code></pre>
  </div>
</div>
  </div>
</div>

  
    
  
</div>

          <nav class="prev-next">
          
            <div class="prev">
              prev:

              
              <span class="section-number">1.11.9.8</span>
              

              <a href="on-error-hook.html"><code>on_error</code> Step Hook</a>
            </div>
          

          
            <div class="next">
              next:

              
              <span class="section-number">1.12</span>
              

              <a href="tasks.html">Tasks</a>
            </div>
          
          </nav>
        </div>

        <div class="page-aside"></div>
      </div>
    </div>

    <ul class="improve-docs">
      <li><img src="images/icons/github-box.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>