<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=775" />
<title>Inputs and Outputs - Concourse CI</title>
<link rel="stylesheet" type="text/css" href="css/normalize.css" />
<link rel="stylesheet" type="text/css" href="css/pipeline.css" />
<link rel="stylesheet" type="text/css" href="css/iosevka.css" />
<link rel="stylesheet" type="text/css" href="css/booklit.css" />
<link rel="stylesheet" type="text/css" href="css/prism.css" />
<link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
<link href="https://fonts.googleapis.com/css?family=Barlow:400,400i,700|Roboto+Slab:300,400,700" rel="stylesheet" />
<script src="js/search.js"></script>
<script async type="text/javascript" src="js/prism.js"></script>
<script data-goatcounter="https://concourse.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
  </head>
  <body>
    

<div class="page-top">
  <nav class="top-nav">
    <a class="top-link logo-link" href="/"><img src="images/logo-white.svg" />Concourse</a>
    
    <a class="top-link active" href="docs.html">Docs</a>
    
    <a class="top-link" href="examples.html">Examples</a>
    
    <a class="top-link" href="project.html">Project</a>
    
    <a class="top-link" href="ecosystem.html">Ecosystem</a>
    
    <a class="top-link" href="https://resource-types.concourse-ci.org">Resource Types</a>
    <a class="top-link" href="https://blog.concourse-ci.org">blog</a>
    <a class="top-link" href="https://github.com/concourse/concourse/discussions">discuss</a>

    <div id="search"></div>

    <script type="text/javascript">
      var app = Elm.Main.init({
        node: document.getElementById('search')
      });

      app.ports.emitSearchTerm.subscribe(function(term) {
        goatcounter.count({
          path: "search:" + term,
          title: "user searched: " + term,
          event: true
        });
      });
    </script>
  </nav>
</div>

    <div class="page-body">
      <div class="page-nav">
        






  
  
  
  
  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1</span><a href="docs.html"  class="active">Docs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1</td>
            <td class="title-cell"><a href="getting-started.html"  class="active">Getting Started</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.2</td>
            <td class="title-cell"><a href="install.html" >Install</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.3</td>
            <td class="title-cell"><a href="auth.html" >Auth &amp; Teams</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.4</td>
            <td class="title-cell"><a href="fly.html" >The <code>fly</code> CLI</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.5</td>
            <td class="title-cell"><a href="config-basics.html" >Config Basics</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.6</td>
            <td class="title-cell"><a href="pipelines.html" >Pipelines</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.7</td>
            <td class="title-cell"><a href="vars.html" >Vars</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.8</td>
            <td class="title-cell"><a href="resources.html" >Resources</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.9</td>
            <td class="title-cell"><a href="resource-types.html" >Resource Types</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.10</td>
            <td class="title-cell"><a href="jobs.html" >Jobs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.11</td>
            <td class="title-cell"><a href="steps.html" >Steps</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.12</td>
            <td class="title-cell"><a href="tasks.html" >Tasks</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.13</td>
            <td class="title-cell"><a href="builds.html" >Builds</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.14</td>
            <td class="title-cell"><a href="how-to-guides.html" >How-To Guides</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.15</td>
            <td class="title-cell"><a href="operation.html" >Operation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.16</td>
            <td class="title-cell"><a href="observation.html" >Observation</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.17</td>
            <td class="title-cell"><a href="internals.html" >Internals</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.1</span><a href="getting-started.html"  class="active">Getting Started</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1.1</td>
            <td class="title-cell"><a href="quick-start.html" >Quick Start</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.2</td>
            <td class="title-cell"><a href="tutorial-hello-world.html" >Hello World Pipeline</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.3</td>
            <td class="title-cell"><a href="tutorial-inputs-outputs.html"  class="self">Inputs and Outputs</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.4</td>
            <td class="title-cell"><a href="tutorial-resources.html" >Resources</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  

  

  
  <div class="context">
    <nav>
      <div class="top">
        <span class="section-number">1.1.3</span><a href="tutorial-inputs-outputs.html"  class="self">Inputs and Outputs</a>
      </div>

      <div class="children">
        <table>
        
          <tr>
            <td class="number-cell">1.1.3.1</td>
            <td class="title-cell"><a href="tutorial-inputs-outputs.html#overview" >Overview</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.3.2</td>
            <td class="title-cell"><a href="tutorial-inputs-outputs.html#what-are-inputs-and-outputs" >What are inputs and outputs?</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.3.3</td>
            <td class="title-cell"><a href="tutorial-inputs-outputs.html#passing-outputs-to-another-task" >Passing outputs to another task</a></td>
          </tr>
        
          <tr>
            <td class="number-cell">1.1.3.4</td>
            <td class="title-cell"><a href="tutorial-inputs-outputs.html#how-does-concourse-track-artifacts" >How does Concourse track artifacts?</a></td>
          </tr>
        
        </table>
      </div>
    </nav>
  </div>
  



      </div>

      <div class="body-content">
        <div class="page-content">
          <div class="section" id="section_tutorial-inputs-outputs">
  
  <h1 class="section-header"><a class="anchor-target" name="tutorial-inputs-outputs" href="#tutorial-inputs-outputs"></a><span class="section-number">1.1.3 </span>Inputs and Outputs</h1>
  

  

  
    
      <div class="section" id="section_overview">
  
  <h2 class="section-header"><a class="anchor-target" name="overview" href="#overview"></a>Overview</h2>
  

  <p>This section is going to go over how to pass data between different <a href="steps.html">steps</a> in a <a href="jobs.html">job</a>. We&#39;ll continue building on our <code>hello-world.yml</code> pipeline.</p><p>In the previous section we learned that <a href="steps.html">steps</a> are where we tell Concourse what to run <em>(i.e. run my tests, run this bash script, build this image, etc.)</em>. We are going to expand on the concept of <a href="steps.html">steps</a> and show you how to pass artifacts/files between <a href="tasks.html">tasks</a>.</p>

  
    
  
</div>
    
      <div class="section" id="section_what-are-inputs-and-outputs">
  
  <h2 class="section-header"><a class="anchor-target" name="what-are-inputs-and-outputs" href="#what-are-inputs-and-outputs"></a>What are inputs and outputs?</h2>
  

  <p>The simple answer is that inputs and outputs are directories that get passed between steps. We&#39;ll refer to both inputs and outputs as <strong>artifacts</strong>.</p><p>Let&#39;s start exploring how artifacts work by adding a <a href="tasks.html#schema.task-config.outputs"><code class="schema-attribute-name"><bold>task-config<wbr />.outputs</bold></code></a> to our <code>hello-world-task</code>.</p><pre><code class="language-yaml">jobs:
- name: hello-world-job
  plan:
  - task: hello-world-task
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: busybox
      # Add &#34;the-artifact&#34; to our task
      outputs:
      - name: the-artifact
      run:
        # Change the command to `ls -lF` to see
        # what the task sees in its working directory
        path: ls
        args: [&#34;-lF&#34;]</code></pre><p>Update the pipeline and trigger the job: <pre><code class="language-">$ fly -t tutorial set-pipeline -p hello-world -c hello-world.yml
$ fly -t tutorial trigger-job --job hello-world/hello-world-job --watch
...
selected worker: 57d7419112ca
running ls -lF
total 4
drwxr-xr-x    2 root     root          4096 Apr  8 16:42 the-artifact/
succeeded</code></pre></p><p>We can see that in the task&#39;s <a href="https://en.wikipedia.org/wiki/Working_directory">current working directory</a> there is now a folder called <code>the-artifact</code>. Concourse makes output directories for you and will pass any contents inside the folder onto later steps. Let&#39;s see how that works next.</p>

  
    
  
</div>
    
      <div class="section" id="section_passing-outputs-to-another-task">
  
  <h2 class="section-header"><a class="anchor-target" name="passing-outputs-to-another-task" href="#passing-outputs-to-another-task"></a>Passing outputs to another task</h2>
  

  <p>To pass artifacts from one task to another, the first task must declare the artifact as an output. The second task must then declare the same artifact as an input. Let&#39;s update the pipeline to do the following:</p><ul>

  <li><p>Have the first task create a file inside <code>the-artifact</code></p></li>

  <li><p>Create a second task to read the file inside <code>the-artifact</code> from the previous step</p></li>

</ul><pre><code class="language-yaml">jobs:
- name: hello-world-job
  plan:
  - task: hello-world-task
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: busybox
      outputs:
      - name: the-artifact
      run:
        # This is a neat way of embedding a script into a task
        path: sh
        args:
        - -cx
        - |
          ls -l .
          echo &#34;hello from another step!&#34; &gt; the-artifact/message
  # Add a second task that reads the contents of the-artifact/message
  - task: read-the-artifact
    config:
      platform: linux
      image_resource:
        type: registry-image
        source:
          repository: busybox
      # To receive &#34;the-artifact&#34;, specify it as an input
      inputs:
      - name: the-artifact
      run:
        path: sh
        args:
        - -cx
        - |
          ls -l .
          cat the-artifact/message</code></pre><p>Update the pipeline and trigger the job: <pre><code class="language-">$ fly -t tutorial set-pipeline -p hello-world -c hello-world.yml
$ fly -t tutorial trigger-job --job hello-world/hello-world-job --watch

initializing
selected worker: 57d7419112ca
running sh -cx ls -l .
echo &#34;hello from another step!&#34; &gt; the-artifact/message

&#43; ls -l .
total 4
drwxr-xr-x    2 root     root          4096 Feb 26 19:09 the-artifact
&#43; echo &#39;hello from another step!&#39;
initializing
selected worker: 57d7419112ca
running sh -cx ls -l .
cat the-artifact/message

&#43; ls -l .
total 4
drwxr-xr-x    1 root     root          4096 Feb 26 19:09 the-artifact
&#43; cat the-artifact/message
hello from another step!
succeeded</code></pre></p><p>With the above pipeline we can see that the file made in the first step is made available in the second step. You can view the same build output from the <a href="http://localhost:8080/teams/main/pipelines/hello-world">web UI</a>. Click on the job tile to see the individual steps. Click on each step to expand it and see the build logs.</p><p><iframe class="frame" frameborder="0" width="100%" height="500px" src="http://localhost:8080/teams/main/pipelines/hello-world"></iframe></p>

  
    
  
</div>
    
      <div class="section" id="section_how-does-concourse-track-artifacts">
  
  <h2 class="section-header"><a class="anchor-target" name="how-does-concourse-track-artifacts" href="#how-does-concourse-track-artifacts"></a>How does Concourse track artifacts?</h2>
  

  <p>As Concourse is running the steps in your job, it is creating a list of <strong>named artifacts</strong>. Let&#39;s see what that looks like for the pipeline we just ran.</p><ul>

  <li><p>Concourse runs the task step <code>hello-world-task</code> with <a href="tasks.html#schema.task-config.outputs">output</a> <code>the-artifact</code></p><blockquote class="aside"><p>Concourse creates an empty artifact, assigns it the name <code>the-artifact</code>, and mounts it inside the task container.</p></blockquote></li>

  <li><p>Concourse runs the task step <code>read-the-artifact</code> with <a href="tasks.html#schema.task-config.inputs">input</a> <code>the-artifact</code></p><blockquote class="aside"><p>Concourse looks up, in its list of artifacts for the build, for an artifact named <code>the-artifact</code>, and mounts it inside the task container. If no input with that name is found then the build would fail.</p></blockquote></li>

</ul><p>The next section will introduce you to the concept of <a href="resources.html">Resources</a>.</p><blockquote class="aside"><p>If you have any feedback for this tutorial please share it in <a href="https://github.com/concourse/concourse/discussions/7353">this GitHub discussion</a></p></blockquote>

  
    
  
</div>
    
  
</div>

          <nav class="prev-next">
          
            <div class="prev">
              prev:

              
              <span class="section-number">1.1.2</span>
              

              <a href="tutorial-hello-world.html">Hello World Pipeline</a>
            </div>
          

          
            <div class="next">
              next:

              
              <span class="section-number">1.1.4</span>
              

              <a href="tutorial-resources.html">Resources</a>
            </div>
          
          </nav>
        </div>

        <div class="page-aside"></div>
      </div>
    </div>

    <ul class="improve-docs">
      <li><img src="images/icons/github-box.svg" /> <a href="https://github.com/concourse/docs">help improve this site</a></li>
      <li><img src="images/booklit.svg" /> powered by <a href="https://vito.github.io/booklit">Booklit</a></li>
    </ul>
  </body>
</html>